-- ===============================================
-- DATACRM - SAMPLE DATA INSERT SCRIPT
-- Creates realistic sample data for all tables
-- Version: 2.0
-- Date: 2025-07-31
-- ===============================================

-- ===============================================
-- 1. SAMPLE ORGANIZATIONS
-- ===============================================

-- Insert additional sample organizations (System org already exists)
INSERT INTO organizations (
    id,
    name,
    slug,
    legal_name,
    business_type,
    tax_id,
    vat_id,
    email,
    phone,
    website,
    street,
    house_number,
    postal_code,
    city,
    state,
    country,
    industry,
    employee_count,
    founded_year,
    annual_revenue,
    description,
    subscription_plan,
    subscription_status,
    billing_email,
    billing_cycle,
    subscription_starts_at,
    subscription_ends_at,
    max_users,
    max_customers,
    max_storage_mb,
    is_active,
    is_verified,
    onboarding_completed
) VALUES 
-- Tech Startup
(
    'a1b2c3d4-e5f6-7890-abcd-123456789001'::uuid,
    'TechFlow Solutions GmbH',
    'techflow-solutions',
    'TechFlow Solutions GmbH',
    'GmbH',
    'DE123456789',
    'DE987654321',
    'info@techflow.de',
    '+49 30 12345678',
    'https://www.techflow.de',
    'Potsdamer Platz',
    '10',
    '10785',
    'Berlin',
    'Berlin',
    'Deutschland',
    'Software Development',
    25,
    2020,
    1250000.00,
    'Innovative Software-Lösungen für mittelständische Unternehmen',
    'professional',
    'active',
    'billing@techflow.de',
    'yearly',
    '2024-01-01 00:00:00+00',
    '2025-01-01 00:00:00+00',
    50,
    5000,
    1000,
    true,
    true,
    true
),
-- Marketing Agency
(
    'b2c3d4e5-f601-8901-bcde-234567890012'::uuid,
    'Creative Marketing Hub',
    'creative-marketing-hub',
    'Creative Marketing Hub UG (haftungsbeschränkt)',
    'UG',
    'DE234567890',
    'DE876543210',
    'hello@creativehub.de',
    '+49 40 98765432',
    'https://www.creativehub.de',
    'Reeperbahn',
    '123',
    '20359',
    'Hamburg',
    'Hamburg',
    'Deutschland',
    'Marketing & Werbung',
    8,
    2021,
    450000.00,
    'Kreative Marketinglösungen für digitale Transformation',
    'basic',
    'active',
    'finance@creativehub.de',
    'monthly',
    '2024-06-01 00:00:00+00',
    '2025-06-01 00:00:00+00',
    15,
    1500,
    500,
    true,
    true,
    true
),
-- Consulting Firm
(
    'c3d4e5f6-a701-9012-cdef-345678901023'::uuid,
    'Business Excellence Consulting',
    'business-excellence',
    'Business Excellence Consulting AG',
    'AG',
    'DE345678901',
    'DE765432109',
    'contact@bec-consulting.de',
    '+49 89 11223344',
    'https://www.bec-consulting.de',
    'Maximilianstraße',
    '45',
    '80539',
    'München',
    'Bayern',
    'Deutschland',
    'Unternehmensberatung',
    35,
    2018,
    2800000.00,
    'Strategische Beratung für nachhaltige Unternehmensentwicklung',
    'enterprise',
    'active',
    'accounting@bec-consulting.de',
    'yearly',
    '2023-09-01 00:00:00+00',
    '2024-09-01 00:00:00+00',
    100,
    10000,
    5000,
    true,
    true,
    true
);

-- ===============================================
-- 2. SAMPLE USERS
-- ===============================================

INSERT INTO users (
    id,
    organization_id,
    email,
    first_name,
    last_name,
    display_name,
    avatar_url,
    phone,
    mobile,
    job_title,
    department,
    employee_id,
    role,
    permissions,
    is_active,
    is_verified,
    email_verified_at,
    two_factor_enabled,
    last_login_at,
    last_activity_at,
    login_count,
    language,
    timezone,
    notifications_email,
    notifications_push,
    theme,
    onboarding_completed,
    tour_completed
) VALUES 
-- Super Admin
(
    '00000000-0000-0000-0000-000000000001'::uuid,
    NULL, -- Super admin has no organization
    'admin@datacrm.system',
    'System',
    'Administrator',
    'System Admin',
    'https://ui-avatars.com/api/?name=System+Admin&background=0D8ABC&color=fff',
    '+49 30 00000000',
    '+49 172 0000000',
    'System Administrator',
    'IT',
    'ADMIN001',
    'super_admin',
    '["all"]'::jsonb,
    true,
    true,
    NOW(),
    true,
    NOW() - INTERVAL '1 hour',
    NOW() - INTERVAL '30 minutes',
    250,
    'de',
    'Europe/Berlin',
    true,
    true,
    'dark',
    true,
    true
),
-- TechFlow Users
(
    'a1b2c3d4-e5f6-7890-abcd-123456789011'::uuid,
    'a1b2c3d4-e5f6-7890-abcd-123456789001'::uuid,
    'max.mueller@techflow.de',
    'Max',
    'Müller',
    'Max Müller (CEO)',
    'https://ui-avatars.com/api/?name=Max+Mueller&background=3B82F6&color=fff',
    '+49 30 12345679',
    '+49 172 1234567',
    'Chief Executive Officer',
    'Management',
    'TF001',
    'org_admin',
    '["users.manage", "customers.manage", "analytics.view", "settings.manage"]'::jsonb,
    true,
    true,
    NOW() - INTERVAL '2 days',
    false,
    NOW() - INTERVAL '2 hours',
    NOW() - INTERVAL '1 hour',
    45,
    'de',
    'Europe/Berlin',
    true,
    true,
    'light',
    true,
    true
),
(
    'a1b2c3d4-e5f6-7890-abcd-123456789012'::uuid,
    'a1b2c3d4-e5f6-7890-abcd-123456789001'::uuid,
    'sarah.schmidt@techflow.de',
    'Sarah',
    'Schmidt',
    'Sarah Schmidt',
    'https://ui-avatars.com/api/?name=Sarah+Schmidt&background=10B981&color=fff',
    '+49 30 12345680',
    '+49 172 2345678',
    'Sales Manager',
    'Vertrieb',
    'TF002',
    'manager',
    '["customers.manage", "customers.view", "analytics.view"]'::jsonb,
    true,
    true,
    NOW() - INTERVAL '1 day',
    true,
    NOW() - INTERVAL '3 hours',
    NOW() - INTERVAL '1 hour',
    89,
    'de',
    'Europe/Berlin',
    true,
    false,
    'light',
    true,
    true
),
(
    'a1b2c3d4-e5f6-7890-abcd-123456789013'::uuid,
    'a1b2c3d4-e5f6-7890-abcd-123456789001'::uuid,
    'tim.wagner@techflow.de',
    'Tim',
    'Wagner',
    'Tim Wagner',
    'https://ui-avatars.com/api/?name=Tim+Wagner&background=8B5CF6&color=fff',
    '+49 30 12345681',
    '+49 172 3456789',
    'Senior Developer',
    'Development',
    'TF003',
    'user',
    '["customers.view"]'::jsonb,
    true,
    true,
    NOW() - INTERVAL '1 day',
    false,
    NOW() - INTERVAL '4 hours',
    NOW() - INTERVAL '2 hours',
    156,
    'de',
    'Europe/Berlin',
    false,
    true,
    'dark',
    true,
    false
),
-- Creative Hub Users  
(
    'b2c3d4e5-f601-8901-bcde-234567890021'::uuid,
    'b2c3d4e5-f601-8901-bcde-234567890012'::uuid,
    'anna.weber@creativehub.de',
    'Anna',
    'Weber',
    'Anna Weber',
    'https://ui-avatars.com/api/?name=Anna+Weber&background=F59E0B&color=fff',
    '+49 40 98765433',
    '+49 172 4567890',
    'Creative Director',
    'Creative',
    'CH001',
    'org_admin',
    '["users.manage", "customers.manage", "analytics.view", "settings.manage"]'::jsonb,
    true,
    true,
    NOW() - INTERVAL '3 days',
    true,
    NOW() - INTERVAL '1 hour',
    NOW() - INTERVAL '30 minutes',
    78,
    'de',
    'Europe/Berlin',
    true,
    true,
    'light',
    true,
    true
),
(
    'b2c3d4e5-f601-8901-bcde-234567890022'::uuid,
    'b2c3d4e5-f601-8901-bcde-234567890012'::uuid,
    'lars.becker@creativehub.de',
    'Lars',
    'Becker',
    'Lars Becker',
    'https://ui-avatars.com/api/?name=Lars+Becker&background=EF4444&color=fff',
    '+49 40 98765434',
    '+49 172 5678901',
    'Graphic Designer',
    'Creative',
    'CH002',
    'user',
    '["customers.view", "customers.edit"]'::jsonb,
    true,
    true,
    NOW() - INTERVAL '2 days',
    false,
    NOW() - INTERVAL '6 hours',
    NOW() - INTERVAL '3 hours',
    34,
    'de',
    'Europe/Berlin',
    true,
    true,
    'auto',
    true,
    true
),
-- Business Excellence Users
(
    'c3d4e5f6-a701-9012-cdef-345678901031'::uuid,
    'c3d4e5f6-a701-9012-cdef-345678901023'::uuid,
    'dr.stefan.richter@bec-consulting.de',
    'Dr. Stefan',
    'Richter',
    'Dr. Stefan Richter',
    'https://ui-avatars.com/api/?name=Stefan+Richter&background=6366F1&color=fff',
    '+49 89 11223345',
    '+49 172 6789012',
    'Senior Partner',
    'Strategy',
    'BEC001',
    'org_admin',
    '["users.manage", "customers.manage", "analytics.view", "settings.manage"]'::jsonb,
    true,
    true,
    NOW() - INTERVAL '1 day',
    true,
    NOW() - INTERVAL '30 minutes',
    NOW() - INTERVAL '15 minutes',
    203,
    'de',
    'Europe/Berlin',
    true,
    false,
    'light',
    true,
    true
);

-- ===============================================
-- 3. SAMPLE CUSTOMERS
-- ===============================================

INSERT INTO customers (
    id,
    organization_id,
    customer_type,
    customer_number,
    -- Person fields
    salutation,
    first_name,
    last_name,
    birth_date,
    gender,
    -- Company fields  
    company_name,
    legal_form,
    tax_id,
    vat_id,
    industry,
    employee_count,
    annual_revenue,
    founding_date,
    -- Contact info
    email,
    email_secondary,
    phone,
    mobile,
    website,
    -- Address
    street,
    house_number,
    postal_code,
    city,
    state,
    country,
    -- Business relationship
    customer_status,
    acquisition_source,
    acquisition_date,
    first_contact_date,
    last_contact_date,
    -- Financial
    credit_limit,
    payment_terms,
    currency,
    tax_rate,
    -- Preferences
    language,
    communication_preference,
    newsletter_subscribed,
    marketing_consent,
    marketing_consent_date,
    privacy_consent,
    privacy_consent_date,
    data_processing_consent,
    -- Categorization
    tags,
    category,
    priority,
    -- Notes
    notes,
    internal_notes,
    custom_fields,
    -- Activity tracking
    last_order_date,
    total_orders,
    total_revenue,
    average_order_value,
    last_activity_type,
    last_activity_date,
    -- Assignment
    assigned_to,
    team,
    is_active,
    is_verified,
    quality_score
) VALUES 
-- TechFlow Customers
-- Company Customer
(
    'a1b2c3d4-e5f6-7890-abcd-123456789101'::uuid,
    'a1b2c3d4-e5f6-7890-abcd-123456789001'::uuid,
    'company',
    'KD000001',
    NULL, NULL, NULL, NULL, NULL,
    'Digitale Innovationen AG',
    'AG',
    'DE987654321',
    'DE123456789',
    'Software Development',
    120,
    5500000.00,
    '2015-03-15',
    'kontakt@digitale-innovationen.de',
    'einkauf@digitale-innovationen.de',
    '+49 69 55667788',
    '+49 172 9988776',
    'https://www.digitale-innovationen.de',
    'Zeil',
    '42',
    '60313',
    'Frankfurt am Main',
    'Hessen',
    'Deutschland',
    'customer',
    'Website',
    '2024-02-15',
    '2024-02-10',
    '2024-07-25',
    50000.00,
    30,
    'EUR',
    19.00,
    'de',
    'email',
    true,
    true,
    '2024-02-15 10:30:00+00',
    true,
    '2024-02-15 10:30:00+00',
    true,
    '{"Enterprise", "Software", "B2B", "Stammkunde"}'::text[],
    'Großkunde',
    'high',
    'Wichtiger Stammkunde mit regelmäßigen Großprojekten. Sehr professionelle Zusammenarbeit.',
    'Zahlt immer pünktlich. Hohe Gewinnmarge. Empfiehlt uns weiter.',
    '{"industry_focus": "FinTech", "preferred_contact_time": "09:00-17:00", "decision_maker": "Dr. Klaus Schneider"}'::jsonb,
    '2024-07-15',
    8,
    387500.00,
    48437.50,
    'project_delivery',
    '2024-07-25 14:30:00+00',
    'a1b2c3d4-e5f6-7890-abcd-123456789012'::uuid,
    'Enterprise Sales',
    true,
    true,
    95
),
-- Person Customer
(
    'a1b2c3d4-e5f6-7890-abcd-123456789102'::uuid,
    'a1b2c3d4-e5f6-7890-abcd-123456789001'::uuid,
    'person',
    'KD000002',
    'Herr',
    'Michael',
    'Hoffmann',
    '1985-09-22',
    'männlich',
    NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL,
    'michael.hoffmann@freelancer.de',
    'mhoffmann@gmail.com',
    '+49 177 1234567',
    '+49 177 1234567',
    'https://www.michaelhoffmann-consulting.de',
    'Kurfürstendamm',
    '195',
    '10707',
    'Berlin',
    'Berlin',
    'Deutschland',
    'lead',
    'Referral',
    '2024-07-01',
    '2024-06-28',
    '2024-07-20',
    5000.00,
    14,
    'EUR',
    19.00,
    'de',
    'phone',
    false,
    true,
    '2024-07-01 15:45:00+00',
    true,
    '2024-07-01 15:45:00+00',
    true,
    '{"Freelancer", "IT-Beratung", "Kleinunternehmer"}'::text[],
    'Freelancer',
    'normal',
    'Freiberuflicher IT-Berater, spezialisiert auf KMU-Digitalisierung.',
    'Preissensitiv, aber qualitätsbewusst. Potenzial für langfristige Partnerschaft.',
    '{"specialization": "KMU Digitalisierung", "availability": "sofort", "budget_range": "< 10k"}'::jsonb,
    NULL,
    0,
    0.00,
    0.00,
    'phone_call',
    '2024-07-20 11:15:00+00',
    'a1b2c3d4-e5f6-7890-abcd-123456789012'::uuid,
    'SMB Sales',
    true,
    false,
    78
),

-- Creative Hub Customers
-- Company Customer
(
    'b2c3d4e5-f601-8901-bcde-234567890101'::uuid,
    'b2c3d4e5-f601-8901-bcde-234567890012'::uuid,
    'company',
    'KD000001',
    NULL, NULL, NULL, NULL, NULL,
    'Lifestyle & Trends GmbH',
    'GmbH',
    'DE456789012',
    'DE210987654',
    'E-Commerce',
    45,
    2300000.00,
    '2019-11-08',
    'marketing@lifestyle-trends.de',
    'buchhaltung@lifestyle-trends.de',
    '+49 40 33445566',
    '+49 172 4455667',
    'https://www.lifestyle-trends.de',
    'Speicherstadt',
    '15',
    '20457',
    'Hamburg',
    'Hamburg',
    'Deutschland',
    'customer',
    'Cold Call',
    '2024-03-20',
    '2024-03-18',
    '2024-07-28',
    25000.00,
    30,
    'EUR',
    19.00,
    'de',
    'email',
    true,
    true,
    '2024-03-20 09:15:00+00',
    true,
    '2024-03-20 09:15:00+00',
    true,
    '{"E-Commerce", "Fashion", "Marketing", "Wiederkehrender Kunde"}'::text[],
    'Mittelstand',
    'high',
    'Erfolgreicher E-Commerce-Anbieter für Lifestyle-Produkte. Regelmäßige Kampagnen.',
    'Sehr kreativ orientiert. Schätzt innovative Ansätze. Budget flexibel bei guten Ideen.',
    '{"campaign_frequency": "monthly", "target_group": "25-45 Jahre", "channels": ["Instagram", "Facebook", "Google Ads"]}'::jsonb,
    '2024-07-01',
    12,
    145800.00,
    12150.00,
    'campaign_launch',
    '2024-07-28 16:45:00+00',
    'b2c3d4e5-f601-8901-bcde-234567890021'::uuid,
    'Creative Team',
    true,
    true,
    88
),
-- Person Customer
(
    'b2c3d4e5-f601-8901-bcde-234567890102'::uuid,
    'b2c3d4e5-f601-8901-bcde-234567890012'::uuid,
    'person',
    'KD000002',
    'Frau',
    'Lisa',
    'Kowalski',
    '1992-04-15',
    'weiblich',
    NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL,
    'lisa.kowalski@yoga-studio.de',
    'lisa.k.yoga@gmail.com',
    '+49 40 77889900',
    '+49 172 7788990',
    'https://www.yoga-mit-lisa.de',
    'Eppendorfer Weg',
    '88',
    '20259',
    'Hamburg',
    'Hamburg',
    'Deutschland',
    'prospect',
    'Social Media',
    '2024-07-15',
    '2024-07-10',
    '2024-07-25',
    3000.00,
    30,
    'EUR',
    19.00,
    'de',
    'sms',
    true,
    true,
    '2024-07-15 18:30:00+00',
    true,
    '2024-07-15 18:30:00+00',
    true,
    '{"Yoga", "Wellness", "Local Business", "Startup"}'::text[],
    'Kleinunternehmer',
    'normal',
    'Yoga-Lehrerin mit eigenem Studio. Möchte Online-Präsenz ausbauen.',
    'Sehr authentisch und nahbar. Budget begrenzt, aber hohes Engagement.',
    '{"business_type": "Yoga Studio", "goals": ["Online Kurse", "Social Media Wachstum"], "budget": "< 5000 EUR"}'::jsonb,
    NULL,
    0,
    0.00,
    0.00,
    'consultation',
    '2024-07-25 19:00:00+00',
    'b2c3d4e5-f601-8901-bcde-234567890022'::uuid,
    'Local Business',
    true,
    false,
    65
),

-- Business Excellence Customers
-- Company Customer
(
    'c3d4e5f6-a701-9012-cdef-345678901101'::uuid,
    'c3d4e5f6-a701-9012-cdef-345678901023'::uuid,
    'company',
    'KD000001',
    NULL, NULL, NULL, NULL, NULL,
    'Industrie 4.0 Solutions AG',
    'AG',
    'DE567890123',
    'DE321098765',
    'Industrie & Fertigung',
    850,
    125000000.00,
    '1998-02-20',
    'vorstand@industrie40-solutions.de',
    'finance@industrie40-solutions.de',
    '+49 89 99887766',
    '+49 172 9988776',
    'https://www.industrie40-solutions.de',
    'Leopoldstraße',
    '240',
    '80807',
    'München',
    'Bayern',
    'Deutschland',
    'customer',
    'Tender',
    '2023-11-15',
    '2023-10-20',
    '2024-07-30',
    200000.00,
    45,
    'EUR',
    19.00,
    'de',
    'email',
    false,
    true,
    '2023-11-15 14:20:00+00',
    true,
    '2023-11-15 14:20:00+00',
    true,
    '{"Industrie 4.0", "Digitalisierung", "Großkonzern", "Strategiekunde"}'::text[],
    'Großkonzern',
    'critical',
    'Führender Anbieter für Industrie 4.0-Lösungen. Langfristige Digitalisierungsstrategie.',
    'Sehr strukturiert und prozessorientiert. Hohe Ansprüche an Qualität und Dokumentation.',
    '{"project_duration": "18 Monate", "team_size": "8 Berater", "focus_areas": ["Process Optimization", "Digital Strategy", "Change Management"]}'::jsonb,
    '2024-06-30',
    3,
    1875000.00,
    625000.00,
    'strategy_workshop',
    '2024-07-30 10:00:00+00',
    'c3d4e5f6-a701-9012-cdef-345678901031'::uuid,
    'Enterprise Strategy',
    true,
    true,
    98
);

-- ===============================================
-- 4. SAMPLE CUSTOMER CONTACTS
-- ===============================================

INSERT INTO customer_contacts (
    id,
    customer_id,
    organization_id,
    first_name,
    last_name,
    job_title,
    department,
    email,
    phone,
    mobile,
    contact_type,
    is_primary,
    is_active,
    created_by
) VALUES 
-- Contacts for Digitale Innovationen AG
(
    'a1b2c3d4-e5f6-7890-abcd-123456789041'::uuid,
    'a1b2c3d4-e5f6-7890-abcd-123456789101'::uuid,
    'a1b2c3d4-e5f6-7890-abcd-123456789001'::uuid,
    'Dr. Klaus',
    'Schneider',
    'Chief Technology Officer',
    'Technology',
    'klaus.schneider@digitale-innovationen.de',
    '+49 69 55667789',
    '+49 172 9988777',
    'primary',
    true,
    true,
    'a1b2c3d4-e5f6-7890-abcd-123456789012'::uuid
),
(
    'a1b2c3d4-e5f6-7890-abcd-123456789042'::uuid,
    'a1b2c3d4-e5f6-7890-abcd-123456789101'::uuid,
    'a1b2c3d4-e5f6-7890-abcd-123456789001'::uuid,
    'Petra',
    'Kaufmann',
    'Head of Procurement',
    'Einkauf',
    'petra.kaufmann@digitale-innovationen.de',
    '+49 69 55667790',
    '+49 172 9988778',
    'billing',
    false,
    true,
    'a1b2c3d4-e5f6-7890-abcd-123456789012'::uuid
),

-- Contacts for Lifestyle & Trends GmbH
(
    'b2c3d4e5-f601-8901-bcde-234567890041'::uuid,
    'b2c3d4e5-f601-8901-bcde-234567890101'::uuid,
    'b2c3d4e5-f601-8901-bcde-234567890012'::uuid,
    'Jennifer',
    'Braun',
    'Chief Marketing Officer',
    'Marketing',
    'jennifer.braun@lifestyle-trends.de',
    '+49 40 33445567',
    '+49 172 4455668',
    'primary',
    true,
    true,
    'b2c3d4e5-f601-8901-bcde-234567890021'::uuid
),
(
    'b2c3d4e5-f601-8901-bcde-234567890042'::uuid,
    'b2c3d4e5-f601-8901-bcde-234567890101'::uuid,
    'b2c3d4e5-f601-8901-bcde-234567890012'::uuid,
    'Robert',
    'Fischer',
    'Finance Manager',
    'Finance',
    'robert.fischer@lifestyle-trends.de',
    '+49 40 33445568',
    '+49 172 4455669',
    'billing',
    false,
    true,
    'b2c3d4e5-f601-8901-bcde-234567890021'::uuid
),

-- Contacts for Industrie 4.0 Solutions AG
(
    'c3d4e5f6-a701-9012-cdef-345678901041'::uuid,
    'c3d4e5f6-a701-9012-cdef-345678901101'::uuid,
    'c3d4e5f6-a701-9012-cdef-345678901023'::uuid,
    'Prof. Dr.',
    'Andrea Steinberg',
    'Chief Executive Officer',
    'Executive Board',
    'andrea.steinberg@industrie40-solutions.de',
    '+49 89 99887767',
    '+49 172 9988779',
    'decision_maker',
    true,
    true,
    'c3d4e5f6-a701-9012-cdef-345678901031'::uuid
),
(
    'c3d4e5f6-a701-9012-cdef-345678901042'::uuid,
    'c3d4e5f6-a701-9012-cdef-345678901101'::uuid,
    'c3d4e5f6-a701-9012-cdef-345678901023'::uuid,
    'Marcus',
    'Wolf',
    'Chief Digital Officer',
    'Digital Transformation',
    'marcus.wolf@industrie40-solutions.de',
    '+49 89 99887768',
    '+49 172 9988780',
    'technical',
    false,
    true,
    'c3d4e5f6-a701-9012-cdef-345678901031'::uuid
);

-- ===============================================
-- 5. SAMPLE CUSTOMER ACTIVITIES
-- ===============================================

INSERT INTO customer_activities (
    id,
    customer_id,
    organization_id,
    user_id,
    activity_type,
    title,
    description,
    outcome,
    scheduled_at,
    completed_at,
    duration_minutes,
    status,
    priority,
    metadata,
    attachments,
    created_by
) VALUES 
-- Activities for Digitale Innovationen AG
(
    'a1b2c3d4-e5f6-7890-abcd-123456789051'::uuid,
    'a1b2c3d4-e5f6-7890-abcd-123456789101'::uuid,
    'a1b2c3d4-e5f6-7890-abcd-123456789001'::uuid,
    'a1b2c3d4-e5f6-7890-abcd-123456789012'::uuid,
    'call',
    'Projektbesprechung Q3 2024',
    'Abstimmung der Anforderungen für die neue Softwarelösung. Diskussion über Timeline und Budget.',
    'Positive Rückmeldung, Budget freigegeben',
    '2024-07-25 14:00:00+00',
    '2024-07-25 14:45:00+00',
    45,
    'completed',
    'high',
    '{"call_type": "video", "participants": ["Dr. Klaus Schneider", "Petra Kaufmann"], "next_steps": ["Angebot erstellen", "Technical Workshop planen"]}'::jsonb,
    '{"https://storage.example.com/meeting-notes-20240725.pdf"}'::text[],
    'a1b2c3d4-e5f6-7890-abcd-123456789012'::uuid
),
(
    'a1b2c3d4-e5f6-7890-abcd-123456789052'::uuid,
    'a1b2c3d4-e5f6-7890-abcd-123456789101'::uuid,
    'a1b2c3d4-e5f6-7890-abcd-123456789001'::uuid,
    'a1b2c3d4-e5f6-7890-abcd-123456789012'::uuid,
    'email',
    'Angebot Q3-Projekt gesendet',
    'Detailliertes Angebot für die Softwareentwicklung inkl. Timeline und Meilensteine übermittelt.',
    'Angebot zugestellt',
    '2024-07-26 09:30:00+00',
    '2024-07-26 09:30:00+00',
    15,
    'completed',
    'high',
    '{"email_type": "proposal", "attachments_count": 3, "follow_up_date": "2024-08-02"}'::jsonb,
    '{"https://storage.example.com/angebot-Q3-2024.pdf", "https://storage.example.com/timeline-overview.pdf"}'::text[],
    'a1b2c3d4-e5f6-7890-abcd-123456789012'::uuid
),

-- Activities for Michael Hoffmann (Freelancer)
(
    'a1b2c3d4-e5f6-7890-abcd-123456789053'::uuid,
    'a1b2c3d4-e5f6-7890-abcd-123456789102'::uuid,
    'a1b2c3d4-e5f6-7890-abcd-123456789001'::uuid,
    'a1b2c3d4-e5f6-7890-abcd-123456789012'::uuid,
    'meeting',
    'Erstberatung Digitalisierung',
    'Analyse der aktuellen IT-Infrastruktur und Beratung zu Digitalisierungsoptionen.',
    'Beratungsbedarf identifiziert',
    '2024-07-20 10:00:00+00',
    '2024-07-20 11:30:00+00',
    90,
    'completed',
    'normal',
    '{"meeting_type": "consultation", "location": "Kunde vor Ort", "topics": ["IT-Assessment", "Cloud Migration", "Security"]}'::jsonb,
    '{"https://storage.example.com/consultation-notes-hoffmann.pdf"}'::text[],
    'a1b2c3d4-e5f6-7890-abcd-123456789012'::uuid
),

-- Activities for Lifestyle & Trends GmbH
(
    'b2c3d4e5-f601-8901-bcde-234567890051'::uuid,
    'b2c3d4e5-f601-8901-bcde-234567890101'::uuid,
    'b2c3d4e5-f601-8901-bcde-234567890012'::uuid,
    'b2c3d4e5-f601-8901-bcde-234567890021'::uuid,
    'workshop',
    'Kreativ-Workshop: Herbstkampagne 2024',
    'Gemeinsame Entwicklung der Kampagnenstrategie für die Herbstkollektion 2024.',
    'Kampagnenkonzept finalisiert',
    '2024-07-28 13:00:00+00',
    '2024-07-28 17:00:00+00',
    240,
    'completed',
    'high',
    '{"workshop_type": "creative", "participants": 8, "deliverables": ["Kampagnenkonzept", "Visual Guidelines", "Timeline"]}'::jsonb,
    '{"https://storage.example.com/herbstkampagne-konzept.pdf", "https://storage.example.com/visual-guidelines.pdf"}'::text[],
    'b2c3d4e5-f601-8901-bcde-234567890021'::uuid
),

-- Activities for Lisa Kowalski (Yoga Studio)
(
    'b2c3d4e5-f601-8901-bcde-234567890052'::uuid,
    'b2c3d4e5-f601-8901-bcde-234567890102'::uuid,
    'b2c3d4e5-f601-8901-bcde-234567890012'::uuid,
    'b2c3d4e5-f601-8901-bcde-234567890022'::uuid,
    'consultation',
    'Beratung Online-Marketing für Yoga-Studio',
    'Strategiegespräch für den Aufbau einer Online-Präsenz und Social Media Marketing.',
    'Marketingstrategie entwickelt',
    '2024-07-25 18:00:00+00',
    '2024-07-25 19:30:00+00',
    90,
    'completed',
    'normal',
    '{"consultation_type": "marketing_strategy", "focus": ["Instagram", "Website", "Online Kurse"], "budget_discussed": "4500 EUR"}'::jsonb,
    '{"https://storage.example.com/yoga-marketing-strategie.pdf"}'::text[],
    'b2c3d4e5-f601-8901-bcde-234567890022'::uuid
),

-- Activities for Industrie 4.0 Solutions AG
(
    'c3d4e5f6-a701-9012-cdef-345678901051'::uuid,
    'c3d4e5f6-a701-9012-cdef-345678901101'::uuid,
    'c3d4e5f6-a701-9012-cdef-345678901023'::uuid,
    'c3d4e5f6-a701-9012-cdef-345678901031'::uuid,
    'strategy_workshop',
    'Strategieworkshop: Digitale Transformation Phase 2',
    'Mehrtägiger Workshop zur Planung der nächsten Phase der digitalen Transformation.',
    'Roadmap für 2025 erstellt',
    '2024-07-30 09:00:00+00',
    '2024-07-30 17:00:00+00',
    480,
    'completed',
    'urgent',
    '{"workshop_type": "strategy", "duration_days": 2, "participants": 12, "focus_areas": ["Process Optimization", "AI Integration", "Change Management"]}'::jsonb,
    '{"https://storage.example.com/transformation-roadmap-2025.pdf", "https://storage.example.com/process-analysis.pdf"}'::text[],
    'c3d4e5f6-a701-9012-cdef-345678901031'::uuid
),

-- Upcoming/Scheduled Activities
(
    'a1b2c3d4-e5f6-7890-abcd-123456789061'::uuid,
    'a1b2c3d4-e5f6-7890-abcd-123456789102'::uuid,
    'a1b2c3d4-e5f6-7890-abcd-123456789001'::uuid,
    'a1b2c3d4-e5f6-7890-abcd-123456789013'::uuid,
    'demo',
    'Produktdemonstration CRM-System',
    'Live-Demo unserer CRM-Lösung für den Freelancer-Bereich.',
    NULL,
    '2024-08-05 15:00:00+00',
    NULL,
    60,
    'scheduled',
    'normal',
    '{"demo_type": "product", "platform": "Teams", "preparation_required": true}'::jsonb,
    '{}'::text[],
    'a1b2c3d4-e5f6-7890-abcd-123456789012'::uuid
),
(
    'b2c3d4e5-f601-8901-bcde-234567890061'::uuid,
    'b2c3d4e5-f601-8901-bcde-234567890102'::uuid,
    'b2c3d4e5-f601-8901-bcde-234567890012'::uuid,
    'b2c3d4e5-f601-8901-bcde-234567890022'::uuid,
    'call',
    'Follow-up: Angebotsbesprechung',
    'Nachfassgespräch zum übermittelten Marketing-Angebot.',
    NULL,
    '2024-08-02 16:00:00+00',
    NULL,
    30,
    'scheduled',
    'high',
    '{"call_type": "phone", "agenda": ["Angebot Review", "Budget Finalisierung", "Timeline Abstimmung"]}'::jsonb,
    '{}'::text[],
    'b2c3d4e5-f601-8901-bcde-234567890022'::uuid
);

-- ===============================================
-- 6. VERIFICATION QUERY
-- ===============================================

-- Show summary of inserted sample data
SELECT 
    'Sample Data Summary' as info,
    (SELECT count(*) FROM organizations WHERE id != '00000000-0000-0000-0000-000000000000'::uuid) as sample_organizations,
    (SELECT count(*) FROM users WHERE role != 'super_admin') as sample_users,
    (SELECT count(*) FROM customers) as sample_customers,
    (SELECT count(*) FROM customer_contacts) as sample_contacts,
    (SELECT count(*) FROM customer_activities) as sample_activities;

-- Show organizations with their user count
SELECT 
    o.name as organization_name,
    o.subscription_plan,
    count(u.id) as user_count,
    (SELECT count(*) FROM customers c WHERE c.organization_id = o.id) as customer_count
FROM organizations o
LEFT JOIN users u ON o.id = u.organization_id
WHERE o.id != '00000000-0000-0000-0000-000000000000'::uuid
GROUP BY o.id, o.name, o.subscription_plan
ORDER BY o.name;

-- Show customer distribution by type and status
SELECT 
    o.name as organization_name,
    c.customer_type,
    c.customer_status,
    count(*) as count
FROM customers c
JOIN organizations o ON c.organization_id = o.id
GROUP BY o.name, c.customer_type, c.customer_status
ORDER BY o.name, c.customer_type, c.customer_status;

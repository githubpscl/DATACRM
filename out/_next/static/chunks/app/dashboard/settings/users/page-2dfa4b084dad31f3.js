(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1187],{7057:function(e,s,r){Promise.resolve().then(r.bind(r,8971))},1047:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9763).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},407:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},2208:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9763).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},740:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9763).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},9345:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9763).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},3247:function(e,s,r){"use strict";r.d(s,{Z:function(){return t}});let t=(0,r(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},8971:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return O}});var t=r(7437),l=r(2265),n=r(7182),a=r(6375),i=r(9820),c=r(2381),d=r(9174),o=r(279),u=r(5060),x=r(5526),m=r(5863),h=r(2252),g=r(7806),j=r(8728),f=r(740),v=r(3247),p=r(9763);let N=(0,p.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var y=r(407),b=r(44),w=r(5805),z=r(8617),Z=r(8906),k=r(9345),_=r(1047),S=r(2208),C=r(4630);let B=(0,p.Z)("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var F=r(5302);function O(){let{user:e}=(0,n.a)(),[s,r]=(0,l.useState)(!1),[p,O]=(0,l.useState)(!0),[E,D]=(0,l.useState)([]),[L,I]=(0,l.useState)([]),[A,R]=(0,l.useState)(""),[Y,M]=(0,l.useState)("all"),[K,q]=(0,l.useState)("all"),[U,V]=(0,l.useState)("all"),[H,P]=(0,l.useState)(new Set),[G,X]=(0,l.useState)(!0),[J,Q]=(0,l.useState)(!1),[T,W]=(0,l.useState)(null),[$,ee]=(0,l.useState)({name:"",role:"",organizationId:""}),[es,er]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{if(!(null==e?void 0:e.email)){O(!1);return}try{let s=await (0,x.j5)(e.email);if(r(s),!s){O(!1);return}let{data:t,error:l}=await (0,x.jX)();if(l)console.error("Error loading organizations:",l);else{let e=[];for(let s of t||[]){let{data:r,error:t}=await (0,x.Yx)(s.id);if(!t&&r){let t=r.map(e=>{var r,t,l,n,a,i;return{id:(null===(r=e.user)||void 0===r?void 0:r.id)||e.id,email:(null===(t=e.user)||void 0===t?void 0:t.email)||"unknown@example.com",name:(null===(l=e.user)||void 0===l?void 0:l.name)||(null===(a=e.user)||void 0===a?void 0:null===(n=a.email)||void 0===n?void 0:n.split("@")[0]),created_at:e.created_at||new Date().toISOString(),last_sign_in_at:null===(i=e.user)||void 0===i?void 0:i.last_sign_in_at,organization:{id:s.id,name:s.name},role:e.role||"user",status:"active"}});e.push({...s,users:t})}else e.push({...s,users:[]})}D(e)}let{data:n,error:a}=await (0,x.pH)();if(a)console.error("Error loading unassigned users:",a),I([{id:"unassigned-1",email:"newuser@example.com",name:"Neuer Benutzer",created_at:new Date().toISOString(),status:"pending"},{id:"unassigned-2",email:"freelancer@example.com",name:"Freelancer User",created_at:new Date(Date.now()-864e5).toISOString(),status:"active"}]);else{let e=(n||[]).map(e=>{var s;return{id:e.id,email:e.email,name:e.name||(null===(s=e.email)||void 0===s?void 0:s.split("@")[0]),created_at:e.created_at,last_sign_in_at:e.last_sign_in_at,status:e.email_confirmed?"active":"pending"}});I(e)}}catch(e){console.error("Error loading data:",e)}finally{O(!1)}})()},[e]);let et=E.map(e=>({...e,users:e.users.filter(e=>{var s;let r=e.email.toLowerCase().includes(A.toLowerCase())||(null===(s=e.name)||void 0===s?void 0:s.toLowerCase().includes(A.toLowerCase()))||!1,t="all"===Y||e.role===Y,l="all"===K||e.status===K;return r&&t&&l})})).filter(e=>"all"===U||e.id===U),el=L.filter(e=>{var s;let r=e.email.toLowerCase().includes(A.toLowerCase())||(null===(s=e.name)||void 0===s?void 0:s.toLowerCase().includes(A.toLowerCase()))||!1,t="all"===Y||"unassigned"===Y&&!e.role,l="all"===K||e.status===K;return r&&t&&l}),en=e=>{let s=new Set(H);s.has(e)?s.delete(e):s.add(e),P(s)},ea=e=>{var s;W(e),ee({name:e.name||"",role:e.role||"user",organizationId:(null===(s=e.organization)||void 0===s?void 0:s.id)||""}),Q(!0)},ei=async()=>{if(T){er(!0);try{var e,s,r;if($.name!==T.name){let{error:e}=await (0,x.Lj)(T.id,{name:$.name});if(e)throw Error((null==e?void 0:e.message)||"Fehler beim Aktualisieren des Profils")}if($.organizationId!==(null===(e=T.organization)||void 0===e?void 0:e.id)){if((null===(r=T.organization)||void 0===r?void 0:r.id)&&await (0,x.l5)(T.id,T.organization.id),$.organizationId){let{error:e}=await (0,x.Es)(T.id,$.role,$.organizationId);if(e)throw Error((null==e?void 0:e.message)||"Fehler beim Zuweisen der Rolle")}}else if($.role!==T.role&&(null===(s=T.organization)||void 0===s?void 0:s.id)){let{error:e}=await (0,x.Es)(T.id,$.role,T.organization.id);if(e)throw Error((null==e?void 0:e.message)||"Fehler beim Aktualisieren der Rolle")}alert("✅ Benutzer ".concat(T.email," erfolgreich aktualisiert!")),Q(!1)}catch(s){console.error("Error saving user:",s);let e=(null==s?void 0:s.message)||"Unbekannter Fehler";alert("Fehler beim Speichern: ".concat(e))}finally{er(!1)}}},ec=async(e,s)=>{if(confirm("M\xf6chten Sie diesen Benutzer wirklich aus der Organisation entfernen?"))try{let{error:r}=await (0,x.l5)(e,s);r?alert("Fehler beim Entfernen des Benutzers: ".concat((null==r?void 0:r.message)||"Unbekannter Fehler")):alert("✅ Benutzer erfolgreich entfernt!")}catch(e){console.error("Error removing user:",e),alert("Fehler beim Entfernen des Benutzers.")}},ed=()=>E.reduce((e,s)=>e+s.users.length,0)+L.length,eo=()=>et.reduce((e,s)=>e+s.users.length,0)+el.length,eu=e=>{switch(e){case"super_admin":return"bg-purple-100 text-purple-800";case"org_admin":return"bg-blue-100 text-blue-800";case"user":return"bg-green-100 text-green-800";case"viewer":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-600"}},ex=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-600"}};return p?(0,t.jsx)(a.Z,{children:(0,t.jsx)("div",{className:"flex min-h-[400px] items-center justify-center",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(m.Z,{className:"h-6 w-6 animate-spin"}),(0,t.jsx)("span",{children:"Lade Benutzerdaten..."})]})})}):s?(0,t.jsxs)(a.Z,{children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Benutzerverwaltung"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Verwalten Sie alle Benutzer und deren Organisationszugeh\xf6rigkeit"})]}),(0,t.jsxs)("div",{className:"flex space-x-3",children:[(0,t.jsxs)(c.z,{variant:"outline",children:[(0,t.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Benutzer hinzuf\xfcgen"]}),(0,t.jsxs)(c.z,{children:[(0,t.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Massenaktionen"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{className:"pb-3",children:(0,t.jsx)(i.ll,{className:"text-sm font-medium",children:"Gesamte Benutzer"})}),(0,t.jsxs)(i.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:ed()}),(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:["In ",E.length," Organisationen"]})]})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{className:"pb-3",children:(0,t.jsx)(i.ll,{className:"text-sm font-medium",children:"Nicht zugeordnet"})}),(0,t.jsxs)(i.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:L.length}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"Ben\xf6tigen Organisation"})]})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{className:"pb-3",children:(0,t.jsx)(i.ll,{className:"text-sm font-medium",children:"Aktive Benutzer"})}),(0,t.jsxs)(i.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:E.reduce((e,s)=>e+s.users.filter(e=>"active"===e.status).length,0)+L.filter(e=>"active"===e.status).length}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"Online verf\xfcgbar"})]})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{className:"pb-3",children:(0,t.jsx)(i.ll,{className:"text-sm font-medium",children:"Administratoren"})}),(0,t.jsxs)(i.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:E.reduce((e,s)=>e+s.users.filter(e=>{var s;return null===(s=e.role)||void 0===s?void 0:s.includes("admin")}).length,0)}),(0,t.jsx)("p",{className:"text-xs text-gray-600",children:"Mit Admin-Rechten"})]})]})]}),(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{children:(0,t.jsxs)(i.ll,{className:"flex items-center",children:[(0,t.jsx)(f.Z,{className:"h-5 w-5 mr-2"}),"Filter & Suche"]})}),(0,t.jsxs)(i.aY,{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(u._,{htmlFor:"search",children:"Suche"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(v.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,t.jsx)(o.I,{id:"search",type:"text",placeholder:"E-Mail oder Name...",value:A,onChange:e=>R(e.target.value),className:"pl-10"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u._,{htmlFor:"roleFilter",children:"Rolle"}),(0,t.jsxs)("select",{id:"roleFilter",value:Y,onChange:e=>M(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"all",children:"Alle Rollen"}),(0,t.jsx)("option",{value:"super_admin",children:"Super Admin"}),(0,t.jsx)("option",{value:"org_admin",children:"Organisations-Admin"}),(0,t.jsx)("option",{value:"user",children:"Benutzer"}),(0,t.jsx)("option",{value:"viewer",children:"Betrachter"}),(0,t.jsx)("option",{value:"unassigned",children:"Nicht zugeordnet"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u._,{htmlFor:"statusFilter",children:"Status"}),(0,t.jsxs)("select",{id:"statusFilter",value:K,onChange:e=>q(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"all",children:"Alle Status"}),(0,t.jsx)("option",{value:"active",children:"Aktiv"}),(0,t.jsx)("option",{value:"inactive",children:"Inaktiv"}),(0,t.jsx)("option",{value:"pending",children:"Ausstehend"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u._,{htmlFor:"orgFilter",children:"Organisation"}),(0,t.jsxs)("select",{id:"orgFilter",value:U,onChange:e=>V(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:"all",children:"Alle Organisationen"}),E.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,t.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[eo()," von ",ed()," Benutzern angezeigt"]}),(0,t.jsx)(c.z,{variant:"outline",size:"sm",onClick:()=>{R(""),M("all"),q("all"),V("all")},children:"Filter zur\xfccksetzen"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[et.map(e=>(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>en(e.id),children:[H.has(e.id)?(0,t.jsx)(N,{className:"h-5 w-5 text-gray-400"}):(0,t.jsx)(y.Z,{className:"h-5 w-5 text-gray-400"}),(0,t.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,t.jsx)(b.Z,{className:"h-5 w-5 text-blue-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.ll,{className:"text-lg",children:e.name}),(0,t.jsxs)(i.SZ,{children:[e.users.length," Benutzer • Erstellt: ",new Date(e.created_at).toLocaleDateString("de-DE")]})]})]}),(0,t.jsxs)(d.C,{variant:"outline",children:[e.users.length," Benutzer"]})]})}),H.has(e.id)&&(0,t.jsx)(i.aY,{children:(0,t.jsx)("div",{className:"space-y-3",children:0===e.users.length?(0,t.jsx)("p",{className:"text-gray-500 text-center py-4",children:"Keine Benutzer in dieser Organisation"}):e.users.map(s=>(0,t.jsx)("div",{className:"border rounded-lg p-4 hover:bg-gray-50",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center",children:(0,t.jsx)(w.Z,{className:"h-5 w-5 text-gray-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium",children:s.name||s.email}),(0,t.jsxs)(d.C,{className:eu(s.role),children:["super_admin"===s.role&&(0,t.jsx)(z.Z,{className:"h-3 w-3 mr-1"}),"org_admin"===s.role&&(0,t.jsx)(Z.Z,{className:"h-3 w-3 mr-1"}),s.role||"Keine Rolle"]}),(0,t.jsx)(d.C,{className:ex(s.status),children:s.status})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500 mt-1",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(k.Z,{className:"h-3 w-3"}),s.email]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(_.Z,{className:"h-3 w-3"}),"Erstellt: ",new Date(s.created_at).toLocaleDateString("de-DE")]}),s.last_sign_in_at&&(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(S.Z,{className:"h-3 w-3"}),"Letzter Login: ",new Date(s.last_sign_in_at).toLocaleDateString("de-DE")]})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(c.z,{variant:"ghost",size:"sm",onClick:()=>ea(s),children:(0,t.jsx)(C.Z,{className:"h-4 w-4"})}),(0,t.jsx)(c.z,{variant:"ghost",size:"sm",onClick:()=>ec(s.id,e.id),children:(0,t.jsx)(B,{className:"h-4 w-4 text-red-500"})})]})]})},s.id))})})]},e.id)),"all"===U&&el.length>0&&(0,t.jsxs)(i.Zb,{children:[(0,t.jsx)(i.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>X(!G),children:[G?(0,t.jsx)(N,{className:"h-5 w-5 text-gray-400"}):(0,t.jsx)(y.Z,{className:"h-5 w-5 text-gray-400"}),(0,t.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,t.jsx)(h.Z,{className:"h-5 w-5 text-yellow-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.ll,{className:"text-lg",children:"Nicht zugeordnete Benutzer"}),(0,t.jsxs)(i.SZ,{children:[el.length," Benutzer ohne Organisation"]})]})]}),(0,t.jsxs)(d.C,{variant:"destructive",children:[el.length," Benutzer"]})]})}),G&&(0,t.jsx)(i.aY,{children:(0,t.jsx)("div",{className:"space-y-3",children:el.map(e=>(0,t.jsx)("div",{className:"border rounded-lg p-4 hover:bg-gray-50 border-yellow-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-yellow-200 rounded-full flex items-center justify-center",children:(0,t.jsx)(w.Z,{className:"h-5 w-5 text-yellow-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium",children:e.name||e.email}),(0,t.jsx)(d.C,{variant:"outline",children:"Keine Organisation"}),(0,t.jsx)(d.C,{className:ex(e.status),children:e.status})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500 mt-1",children:[(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(k.Z,{className:"h-3 w-3"}),e.email]}),(0,t.jsxs)("span",{className:"flex items-center gap-1",children:[(0,t.jsx)(_.Z,{className:"h-3 w-3"}),"Erstellt: ",new Date(e.created_at).toLocaleDateString("de-DE")]})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(c.z,{variant:"ghost",size:"sm",onClick:()=>ea(e),children:(0,t.jsx)(C.Z,{className:"h-4 w-4"})}),(0,t.jsxs)(c.z,{variant:"outline",size:"sm",children:[(0,t.jsx)(g.Z,{className:"h-4 w-4 mr-1"}),"Zuordnen"]})]})]})},e.id))})})]})]}),0===eo()&&(0,t.jsx)(i.Zb,{className:"text-center py-12",children:(0,t.jsxs)(i.aY,{children:[(0,t.jsx)(w.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Keine Benutzer gefunden"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Keine Benutzer entsprechen den aktuellen Filterkriterien."}),(0,t.jsx)(c.z,{variant:"outline",onClick:()=>{R(""),M("all"),q("all"),V("all")},children:"Filter zur\xfccksetzen"})]})})]}),J&&T&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold",children:"Benutzer bearbeiten"}),(0,t.jsx)(c.z,{variant:"ghost",onClick:()=>Q(!1),className:"p-1",children:"✕"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(u._,{htmlFor:"userName",children:"Name"}),(0,t.jsx)(o.I,{id:"userName",type:"text",value:$.name,onChange:e=>ee(s=>({...s,name:e.target.value})),placeholder:"Vollst\xe4ndiger Name",className:"mt-1"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u._,{htmlFor:"userRole",children:"Rolle"}),(0,t.jsxs)("select",{id:"userRole",value:$.role,onChange:e=>ee(s=>({...s,role:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mt-1",children:[(0,t.jsx)("option",{value:"user",children:"Benutzer"}),(0,t.jsx)("option",{value:"org_admin",children:"Organisations-Admin"}),(0,t.jsx)("option",{value:"viewer",children:"Betrachter"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u._,{htmlFor:"userOrg",children:"Organisation"}),(0,t.jsxs)("select",{id:"userOrg",value:$.organizationId,onChange:e=>ee(s=>({...s,organizationId:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mt-1",children:[(0,t.jsx)("option",{value:"",children:"Keine Organisation"}),E.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsx)("div",{className:"bg-blue-50 p-3 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,t.jsx)(Z.Z,{className:"h-4 w-4 inline mr-1"}),"Benutzer: ",T.email]})}),(0,t.jsxs)("div",{className:"flex gap-2 pt-4",children:[(0,t.jsx)(c.z,{variant:"outline",onClick:()=>Q(!1),className:"flex-1",children:"Abbrechen"}),(0,t.jsx)(c.z,{onClick:ei,disabled:es,className:"flex-1",children:es?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Z,{className:"h-4 w-4 animate-spin mr-2"}),"Speichern..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.Z,{className:"h-4 w-4 mr-2"}),"Speichern"]})})]})]})]})})]}):(0,t.jsx)(a.Z,{children:(0,t.jsx)(i.Zb,{className:"text-center py-12",children:(0,t.jsxs)(i.aY,{children:[(0,t.jsx)(h.Z,{className:"h-12 w-12 text-red-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Zugriff verweigert"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Sie ben\xf6tigen Super Admin-Rechte, um auf diese Seite zuzugreifen."})]})})})}},2381:function(e,s,r){"use strict";r.d(s,{z:function(){return d}});var t=r(7437),l=r(2265),n=r(7053),a=r(535),i=r(3448);let c=(0,a.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=l.forwardRef((e,s)=>{let{className:r,variant:l,size:a,asChild:d=!1,...o}=e,u=d?n.g7:"button";return(0,t.jsx)(u,{className:(0,i.cn)(c({variant:l,size:a,className:r})),ref:s,...o})});d.displayName="Button"},279:function(e,s,r){"use strict";r.d(s,{I:function(){return a}});var t=r(7437),l=r(2265),n=r(3448);let a=l.forwardRef((e,s)=>{let{className:r,type:l,...a}=e;return(0,t.jsx)("input",{type:l,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:s,...a})});a.displayName="Input"},5060:function(e,s,r){"use strict";r.d(s,{_:function(){return d}});var t=r(7437),l=r(2265),n=r(6394),a=r(535),i=r(3448);let c=(0,a.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=l.forwardRef((e,s)=>{let{className:r,...l}=e;return(0,t.jsx)(n.f,{ref:s,className:(0,i.cn)(c(),r),...l})});d.displayName=n.f.displayName}},function(e){e.O(0,[9735,7583,3335,7182,6375,2971,2117,1744],function(){return e(e.s=7057)}),_N_E=e.O()}]);
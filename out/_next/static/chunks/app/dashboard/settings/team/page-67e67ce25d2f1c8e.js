(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9234],{901:function(e,r,s){Promise.resolve().then(s.bind(s,6348))},6348:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return y}});var n=s(7437),i=s(2265),l=s(7182),a=s(6375),t=s(9820),d=s(2381),c=s(9174),o=s(279),u=s(5060),m=s(5526),x=s(8617),h=s(8906),j=s(5805),f=s(5863),g=s(2252),v=s(7806),p=s(9345),b=s(4743),N=s(8930);function y(){let{user:e}=(0,l.a)(),[r,s]=(0,i.useState)([]),[y,w]=(0,i.useState)([]),[z,Z]=(0,i.useState)(!1),[S,_]=(0,i.useState)(!1),[B,E]=(0,i.useState)(!0),[k,R]=(0,i.useState)(!1),[O,C]=(0,i.useState)(!1),[F,A]=(0,i.useState)(""),[I,M]=(0,i.useState)("user"),[T,D]=(0,i.useState)("");(0,i.useEffect)(()=>{(async()=>{if(null==e?void 0:e.id)try{E(!0);let r=await (0,m.j5)(e.id);Z(r);let n=await (0,m.RN)(e.id);_(n);let{data:i}=await (0,m.jX)();w(i||[]);let{data:l}=await (0,m.Jm)();s(l||[])}catch(e){console.error("Error loading team data:",e)}finally{E(!1)}})()},[e]);let J=async()=>{if(!F||!I||!T){alert("Bitte f\xfcllen Sie alle Felder aus.");return}R(!0);try{console.log("Invitation sent:",{email:F,role:I,organizationId:T}),alert("Einladung an ".concat(F," wurde gesendet!")),A(""),M("user"),D(""),C(!1)}catch(e){console.error("Error inviting user:",e),alert("Fehler beim Senden der Einladung.")}finally{R(!1)}},V=async(e,r,n)=>{try{let{error:i}=await (0,m.Es)(e,r,n);if(i){console.error("Error changing role:",i),alert("Fehler beim \xc4ndern der Rolle.");return}let{data:l}=await (0,m.Jm)();s(l||[]),alert("Rolle erfolgreich ge\xe4ndert!")}catch(e){console.error("Error changing role:",e),alert("Fehler beim \xc4ndern der Rolle.")}},Y=async(e,r)=>{if(confirm("Sind Sie sicher, dass Sie diesen Benutzer entfernen m\xf6chten?"))try{let{error:n}=await (0,m.l5)(e,r);if(n){console.error("Error removing user:",n),alert("Fehler beim Entfernen des Benutzers.");return}let{data:i}=await (0,m.Jm)();s(i||[]),alert("Benutzer erfolgreich entfernt!")}catch(e){console.error("Error removing user:",e),alert("Fehler beim Entfernen des Benutzers.")}},K=e=>{let r={super_admin:{variant:"destructive",icon:(0,n.jsx)(x.Z,{className:"h-3 w-3 mr-1"})},org_admin:{variant:"default",icon:(0,n.jsx)(h.Z,{className:"h-3 w-3 mr-1"})},user:{variant:"secondary",icon:(0,n.jsx)(j.Z,{className:"h-3 w-3 mr-1"})},viewer:{variant:"outline",icon:(0,n.jsx)(j.Z,{className:"h-3 w-3 mr-1"})}},s=r[e]||r.user;return(0,n.jsxs)(c.C,{variant:s.variant,className:"flex items-center",children:[s.icon,e.replace("_"," ").toUpperCase()]})};return B?(0,n.jsx)(a.Z,{children:(0,n.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(f.Z,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,n.jsx)("p",{children:"Lade Team-Informationen..."})]})})}):z||S?(0,n.jsx)(a.Z,{children:(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Team & Rollen"}),(0,n.jsx)("p",{className:"text-gray-600 mt-1",children:"Verwalten Sie Benutzer, Rollen und Berechtigungen"})]}),(0,n.jsx)("div",{className:"flex space-x-3",children:(0,n.jsxs)(d.z,{onClick:()=>C(!0),className:"flex items-center",children:[(0,n.jsx)(v.Z,{className:"h-4 w-4 mr-2"}),"Benutzer einladen"]})})]}),O&&(0,n.jsxs)(t.Zb,{children:[(0,n.jsxs)(t.Ol,{children:[(0,n.jsxs)(t.ll,{className:"flex items-center",children:[(0,n.jsx)(p.Z,{className:"h-5 w-5 mr-2"}),"Neuen Benutzer einladen"]}),(0,n.jsx)(t.SZ,{children:"Senden Sie eine Einladung per E-Mail"})]}),(0,n.jsxs)(t.aY,{className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(u._,{htmlFor:"inviteEmail",children:"E-Mail-Adresse"}),(0,n.jsx)(o.I,{id:"inviteEmail",type:"email",value:F,onChange:e=>A(e.target.value),placeholder:"benutzer@beispiel.de"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(u._,{htmlFor:"inviteRole",children:"Rolle"}),(0,n.jsxs)("select",{id:"inviteRole",value:I,onChange:e=>M(e.target.value),className:"w-full p-2 border rounded-md",children:[(0,n.jsx)("option",{value:"viewer",children:"Betrachter"}),(0,n.jsx)("option",{value:"user",children:"Benutzer"}),(0,n.jsx)("option",{value:"org_admin",children:"Organisation Admin"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(u._,{htmlFor:"inviteOrg",children:"Organisation"}),(0,n.jsxs)("select",{id:"inviteOrg",value:T,onChange:e=>D(e.target.value),className:"w-full p-2 border rounded-md",children:[(0,n.jsx)("option",{value:"",children:"Organisation w\xe4hlen"}),y.map(e=>(0,n.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,n.jsxs)("div",{className:"flex space-x-3",children:[(0,n.jsxs)(d.z,{onClick:J,disabled:k,className:"flex items-center",children:[k?(0,n.jsx)(f.Z,{className:"h-4 w-4 mr-2 animate-spin"}):(0,n.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),"Einladung senden"]}),(0,n.jsx)(d.z,{variant:"outline",onClick:()=>C(!1),children:"Abbrechen"})]})]})]}),(0,n.jsxs)(t.Zb,{children:[(0,n.jsxs)(t.Ol,{children:[(0,n.jsx)(t.ll,{children:"Team-Mitglieder"}),(0,n.jsx)(t.SZ,{children:"\xdcbersicht aller Benutzer und deren Rollen"})]}),(0,n.jsx)(t.aY,{children:(0,n.jsx)("div",{className:"space-y-4",children:0===r.length?(0,n.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,n.jsx)(j.Z,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),(0,n.jsx)("p",{children:"Noch keine Team-Mitglieder vorhanden"})]}):r.map(e=>(0,n.jsx)("div",{className:"border rounded-lg p-4",children:(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("div",{className:"h-10 w-10 bg-blue-100 rounded-full flex items-center justify-center",children:(0,n.jsx)(j.Z,{className:"h-5 w-5 text-blue-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"font-medium",children:e.user.email}),(0,n.jsx)("p",{className:"text-sm text-gray-500",children:e.organization.name})]})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[K(e.role),(z||S&&"super_admin"!==e.role)&&(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsxs)("select",{value:e.role,onChange:r=>V(e.user_id,r.target.value,e.organization_id),className:"text-sm p-1 border rounded",children:["super_admin"!==e.role&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("option",{value:"viewer",children:"Betrachter"}),(0,n.jsx)("option",{value:"user",children:"Benutzer"}),(0,n.jsx)("option",{value:"org_admin",children:"Org Admin"})]}),z&&(0,n.jsx)("option",{value:"super_admin",children:"Super Admin"})]}),"super_admin"!==e.role&&(0,n.jsx)(d.z,{variant:"outline",size:"sm",onClick:()=>Y(e.user_id,e.organization_id),children:(0,n.jsx)(N.Z,{className:"h-4 w-4"})})]})]})]})},"".concat(e.user_id,"-").concat(e.organization_id)))})})]}),(0,n.jsxs)(t.Zb,{children:[(0,n.jsxs)(t.Ol,{children:[(0,n.jsx)(t.ll,{children:"Rollen-\xdcbersicht"}),(0,n.jsx)(t.SZ,{children:"Berechtigungen der verschiedenen Rollen"})]}),(0,n.jsx)(t.aY,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,n.jsxs)("div",{className:"flex items-center mb-3",children:[(0,n.jsx)(x.Z,{className:"h-5 w-5 text-red-500 mr-2"}),(0,n.jsx)("h4",{className:"font-medium",children:"Super Admin"})]}),(0,n.jsxs)("ul",{className:"text-sm space-y-1 text-gray-600",children:[(0,n.jsx)("li",{children:"• Alle Organisationen verwalten"}),(0,n.jsx)("li",{children:"• Alle Benutzer verwalten"}),(0,n.jsx)("li",{children:"• System-Einstellungen"}),(0,n.jsx)("li",{children:"• Vollzugriff auf alle Daten"})]})]}),(0,n.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,n.jsxs)("div",{className:"flex items-center mb-3",children:[(0,n.jsx)(h.Z,{className:"h-5 w-5 text-blue-500 mr-2"}),(0,n.jsx)("h4",{className:"font-medium",children:"Organisation Admin"})]}),(0,n.jsxs)("ul",{className:"text-sm space-y-1 text-gray-600",children:[(0,n.jsx)("li",{children:"• Organisation verwalten"}),(0,n.jsx)("li",{children:"• Team-Mitglieder einladen"}),(0,n.jsx)("li",{children:"• Rollen zuweisen"}),(0,n.jsx)("li",{children:"• Daten der Organisation"})]})]}),(0,n.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,n.jsxs)("div",{className:"flex items-center mb-3",children:[(0,n.jsx)(j.Z,{className:"h-5 w-5 text-green-500 mr-2"}),(0,n.jsx)("h4",{className:"font-medium",children:"Benutzer"})]}),(0,n.jsxs)("ul",{className:"text-sm space-y-1 text-gray-600",children:[(0,n.jsx)("li",{children:"• Daten bearbeiten"}),(0,n.jsx)("li",{children:"• Kampagnen erstellen"}),(0,n.jsx)("li",{children:"• Berichte ansehen"}),(0,n.jsx)("li",{children:"• Standard-Funktionen"})]})]}),(0,n.jsxs)("div",{className:"p-4 border rounded-lg",children:[(0,n.jsxs)("div",{className:"flex items-center mb-3",children:[(0,n.jsx)(j.Z,{className:"h-5 w-5 text-gray-500 mr-2"}),(0,n.jsx)("h4",{className:"font-medium",children:"Betrachter"})]}),(0,n.jsxs)("ul",{className:"text-sm space-y-1 text-gray-600",children:[(0,n.jsx)("li",{children:"• Nur Lese-Zugriff"}),(0,n.jsx)("li",{children:"• Berichte ansehen"}),(0,n.jsx)("li",{children:"• Dashboard einsehen"}),(0,n.jsx)("li",{children:"• Keine Bearbeitung"})]})]})]})})]})]})}):(0,n.jsx)(a.Z,{children:(0,n.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(g.Z,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,n.jsx)("h2",{className:"text-xl font-bold mb-2",children:"Zugriff verweigert"}),(0,n.jsx)("p",{className:"text-gray-600",children:"Sie haben keine Berechtigung, diese Seite zu sehen."})]})})})}},2381:function(e,r,s){"use strict";s.d(r,{z:function(){return c}});var n=s(7437),i=s(2265),l=s(7053),a=s(535),t=s(3448);let d=(0,a.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,r)=>{let{className:s,variant:i,size:a,asChild:c=!1,...o}=e,u=c?l.g7:"button";return(0,n.jsx)(u,{className:(0,t.cn)(d({variant:i,size:a,className:s})),ref:r,...o})});c.displayName="Button"},279:function(e,r,s){"use strict";s.d(r,{I:function(){return a}});var n=s(7437),i=s(2265),l=s(3448);let a=i.forwardRef((e,r)=>{let{className:s,type:i,...a}=e;return(0,n.jsx)("input",{type:i,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:r,...a})});a.displayName="Input"},5060:function(e,r,s){"use strict";s.d(r,{_:function(){return c}});var n=s(7437),i=s(2265),l=s(6394),a=s(535),t=s(3448);let d=(0,a.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=i.forwardRef((e,r)=>{let{className:s,...i}=e;return(0,n.jsx)(l.f,{ref:r,className:(0,t.cn)(d(),s),...i})});c.displayName=l.f.displayName}},function(e){e.O(0,[9735,7583,9240,7182,6375,2971,2117,1744],function(){return e(e.s=901)}),_N_E=e.O()}]);
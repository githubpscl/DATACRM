(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{6267:function(e,s,t){Promise.resolve().then(t.bind(t,8119))},8119:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return O}});var n=t(7437),l=t(7182),i=t(9376),r=t(2265),a=t(1395),c=t(4415),o=t(9820),d=t(9174),u=t(5526),m=t(9345),x=t(5805),h=t(4401),g=t(8906),j=t(2252),f=t(5252),p=t(525),N=t(2208),b=t(6221),v=t(9397),y=t(6858),w=t(1723),Z=t(2222);let E=[{id:1,type:"campaign",title:"Newsletter Januar gesendet",description:"2.847 E-Mails erfolgreich zugestellt",time:"2 Stunden",status:"success"},{id:2,type:"import",title:"Kundendaten importiert",description:"156 neue Kontakte hinzugef\xfcgt",time:"4 Stunden",status:"success"},{id:3,type:"journey",title:"Willkommens-Journey aktiviert",description:"Automatisierte Sequenz f\xfcr neue Kunden",time:"1 Tag",status:"active"}],D=[{title:"Neue Kampagne",description:"E-Mail oder WhatsApp Kampagne erstellen",icon:m.Z,href:"/dashboard/campaigns/create",color:"blue"},{title:"Kunden importieren",description:"CSV-Datei oder API-Import",icon:x.Z,href:"/dashboard/data-import",color:"green"},{title:"Journey erstellen",description:"Automatisierte Kundenreise einrichten",icon:h.Z,href:"/dashboard/journeys/create",color:"purple"}];function z(){let{user:e}=(0,l.a)(),[s,t]=(0,r.useState)(null),[i,a]=(0,r.useState)(!0);(0,r.useEffect)(()=>{c()},[]);let c=async()=>{try{a(!0);let{data:e,error:s}=await (0,u.Eb)();s?(console.error("Error loading analytics data:",s),t(null)):t(e)}catch(e){console.error("Error loading analytics data:",e),t(null)}finally{a(!1)}},z=(null==e?void 0:e.email)==="testdatacrmpascal@gmail.com";return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsxs)(o.Zb,{className:"border-l-4 border-l-blue-500",children:[(0,n.jsx)(o.Ol,{children:(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,n.jsx)(g.Z,{className:"h-5 w-5 text-blue-600"})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(o.ll,{className:"text-lg",children:["Willkommen im DataCRM Dashboard, ",null==e?void 0:e.email,"!"]}),(0,n.jsxs)(o.SZ,{className:"flex items-center gap-2 mt-2",children:[(0,n.jsx)(d.C,{variant:z?"destructive":"secondary",children:z?"Super Admin":"Demo User"}),z&&(0,n.jsx)("span",{className:"text-sm text-muted-foreground",children:"Vollzugriff auf alle Admin-Funktionen"})]})]})]})}),(0,n.jsx)(o.aY,{children:(0,n.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg border",children:(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)(j.Z,{className:"h-5 w-5 text-blue-600 mt-0.5"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"System-Status & Einrichtung:"}),(0,n.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,n.jsx)("li",{children:"• F\xfchren Sie die SQL-Skripte in Supabase aus (database-setup.sql)"}),(0,n.jsx)("li",{children:"• Verwalten Sie Organisationen unter Einstellungen → Organisationen"}),(0,n.jsx)("li",{children:"• Team & Berechtigungen unter Einstellungen → Team & Berechtigungen"}),(0,n.jsx)("li",{children:"• Session automatisch gespeichert (10 Min. Inaktivit\xe4ts-Timeout)"})]})]})]})})})]})}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,n.jsxs)(o.Zb,{children:[(0,n.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(o.ll,{className:"text-sm font-medium",children:"Gesamtkunden"}),(0,n.jsx)(x.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsxs)(o.aY,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:i?"...":(null==s?void 0:s.totalCustomers.toLocaleString())||"0"}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"+12% vom letzten Monat"})]})]}),(0,n.jsxs)(o.Zb,{children:[(0,n.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(o.ll,{className:"text-sm font-medium",children:"E-Mails gesendet"}),(0,n.jsx)(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsxs)(o.aY,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:i?"...":(null==s?void 0:s.activeCustomers.toLocaleString())||"0"}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"+8% vom letzten Monat"})]})]}),(0,n.jsxs)(o.Zb,{children:[(0,n.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(o.ll,{className:"text-sm font-medium",children:"Umsatz"}),(0,n.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsxs)(o.aY,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:i?"...":"".concat((null==s?void 0:s.leadsCount.toLocaleString())||"0"," Leads")}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"+23% vom letzten Monat"})]})]}),(0,n.jsxs)(o.Zb,{children:[(0,n.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(o.ll,{className:"text-sm font-medium",children:"Conversion Rate"}),(0,n.jsx)(p.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsxs)(o.aY,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:i?"...":"".concat((null==s?void 0:s.customerGrowthRate)||0,"%")}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"+2.1% vom letzten Monat"})]})]}),(0,n.jsxs)(o.Zb,{children:[(0,n.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(o.ll,{className:"text-sm font-medium",children:"\xd6ffnungsrate"}),(0,n.jsx)(N.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsxs)(o.aY,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:i?"...":"".concat((null==s?void 0:s.newCustomersThisMonth)||0)}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"+1.2% vom letzten Monat"})]})]}),(0,n.jsxs)(o.Zb,{children:[(0,n.jsxs)(o.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,n.jsx)(o.ll,{className:"text-sm font-medium",children:"Klickrate"}),(0,n.jsx)(b.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,n.jsxs)(o.aY,{children:[(0,n.jsx)("div",{className:"text-2xl font-bold",children:i?"...":"".concat((null==s?void 0:s.prospectsCount)||0)}),(0,n.jsx)("p",{className:"text-xs text-muted-foreground",children:"+0.8% vom letzten Monat"})]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,n.jsxs)(o.Zb,{children:[(0,n.jsxs)(o.Ol,{children:[(0,n.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,n.jsx)(v.Z,{className:"h-5 w-5"}),"Schnellaktionen"]}),(0,n.jsx)(o.SZ,{children:"H\xe4ufig verwendete Funktionen schnell erreichen"})]}),(0,n.jsx)(o.aY,{className:"space-y-4",children:D.map(e=>{let s=e.icon;return(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"p-2 rounded-lg ".concat("blue"===e.color?"bg-blue-100 text-blue-600":"green"===e.color?"bg-green-100 text-green-600":"bg-purple-100 text-purple-600"),children:(0,n.jsx)(s,{className:"h-4 w-4"})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"font-medium",children:e.title}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]}),(0,n.jsx)(y.Z,{className:"h-4 w-4 text-gray-400"})]},e.title)})})]}),(0,n.jsxs)(o.Zb,{children:[(0,n.jsxs)(o.Ol,{children:[(0,n.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,n.jsx)(w.Z,{className:"h-5 w-5"}),"Letzte Aktivit\xe4ten"]}),(0,n.jsx)(o.SZ,{children:"\xdcbersicht \xfcber die neuesten Systemaktivit\xe4ten"})]}),(0,n.jsx)(o.aY,{className:"space-y-4",children:E.map(e=>(0,n.jsxs)("div",{className:"flex items-start gap-3 p-3 border rounded-lg",children:[(0,n.jsxs)("div",{className:"p-2 rounded-full ".concat("success"===e.status?"bg-green-100 text-green-600":"active"===e.status?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"),children:["campaign"===e.type&&(0,n.jsx)(m.Z,{className:"h-3 w-3"}),"import"===e.type&&(0,n.jsx)(x.Z,{className:"h-3 w-3"}),"journey"===e.type&&(0,n.jsx)(h.Z,{className:"h-3 w-3"})]}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h4",{className:"font-medium text-sm",children:e.title}),(0,n.jsx)("p",{className:"text-xs text-gray-600",children:e.description}),(0,n.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["vor ",e.time]})]}),(0,n.jsx)(d.C,{variant:"success"===e.status?"default":"secondary",children:"success"===e.status?"Erfolgreich":"Aktiv"})]},e.id))})]})]}),(0,n.jsxs)(o.Zb,{children:[(0,n.jsxs)(o.Ol,{children:[(0,n.jsxs)(o.ll,{className:"flex items-center gap-2",children:[(0,n.jsx)(Z.Z,{className:"h-5 w-5"}),"KI-Einblicke & Empfehlungen"]}),(0,n.jsx)(o.SZ,{children:"Personalisierte Empfehlungen basierend auf Ihren Daten"})]}),(0,n.jsx)(o.aY,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg",children:[(0,n.jsx)("h4",{className:"font-medium text-blue-900",children:"\uD83D\uDCC8 Performance-Trend"}),(0,n.jsx)("p",{className:"text-sm text-blue-800 mt-2",children:"Ihre E-Mail-Kampagnen zeigen eine positive Entwicklung. Die \xd6ffnungsrate ist um 15% gestiegen. Optimal w\xe4ren jetzt personalisierte Follow-up Nachrichten."})]}),(0,n.jsxs)("div",{className:"p-4 bg-gradient-to-r from-green-50 to-green-100 rounded-lg",children:[(0,n.jsx)("h4",{className:"font-medium text-green-900",children:"\uD83C\uDFAF Segmentierung"}),(0,n.jsx)("p",{className:"text-sm text-green-800 mt-2",children:"23% Ihrer Kunden sind hochaktiv. Erstellen Sie ein Premium-Segment f\xfcr gezielte Upselling-Kampagnen mit personalisierten Angeboten."})]})]})})]})]})}var S=t(6262);function O(){let{user:e,loading:s}=(0,l.a)(),t=(0,i.useRouter)(),[o,d]=(0,r.useState)(!1),[m,x]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{d(!0)},[]),(0,r.useEffect)(()=>{s||e||t.push("/login")},[e,s,t]),(0,r.useEffect)(()=>{let n=async()=>{if((null==e?void 0:e.email)&&o){try{if(await (0,u.isSuperAdmin)(e.email)){t.push("/dashboard/admin/organizations");return}}catch(e){console.error("Error checking user role:",e)}x(!1)}};!s&&(null==e?void 0:e.email)&&n()},[e,s,t,o]),!o||s||m)?(0,n.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,n.jsx)(a.Z,{})}):e?(0,n.jsx)(S.Z,{children:(0,n.jsx)(c.Z,{children:(0,n.jsx)(z,{})})}):null}},6262:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});var n=t(7437),l=t(7182),i=t(9376),r=t(2265);function a(e){let{children:s}=e,{user:t,loading:a}=(0,l.a)(),c=(0,i.useRouter)(),[o,d]=(0,r.useState)(null),[u,m]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(()=>{if(a){console.log("\uD83D\uDEE1️ [ORG GUARD] Auth still loading, waiting...");return}if(!t){console.log("❌ [ORG GUARD] No user found, redirecting to login"),c.push("/login");return}try{var e,s;console.log("\uD83D\uDEE1️ [ORG GUARD] Checking organization for user:",t.email),console.log("\uD83D\uDEE1️ [ORG GUARD] User object:",{id:t.id,email:t.email,role:t.role,organizationId:t.organizationId,organization:t.organization});let n="super_admin"===t.role||t.organizationId&&(null===(e=t.organization)||void 0===e?void 0:e.id);if(console.log("\uD83D\uDEE1️ [ORG GUARD] Organization check result:",{isSuperAdmin:"super_admin"===t.role,hasOrganizationId:!!t.organizationId,hasOrganizationObject:!!(null===(s=t.organization)||void 0===s?void 0:s.id),finalResult:n}),!n){console.log("❌ [ORG GUARD] No organization access, redirecting to organization-required"),c.push("/organization-required");return}console.log("✅ [ORG GUARD] Organization check passed, allowing access"),d(!0)}catch(e){console.error("❌ [ORG GUARD] Error checking organization:",e),c.push("/organization-required")}finally{console.log("\uD83D\uDEE1️ [ORG GUARD] Check complete, setting checking to false"),m(!1)}})()},[t,a,c]),a||u)?(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):o?(0,n.jsx)(n.Fragment,{children:s}):null}},1395:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var n=t(7437),l=t(5863);function i(e){let{className:s="h-8 w-8"}=e;return(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)(l.Z,{className:"animate-spin ".concat(s)})})}}},function(e){e.O(0,[1216,7182,4415,1744],function(){return e(e.s=6267)}),_N_E=e.O()}]);
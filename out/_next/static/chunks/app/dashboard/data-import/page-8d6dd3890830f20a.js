(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9605],{2056:function(e,s,t){Promise.resolve().then(t.bind(t,6696))},6696:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return y}});var r=t(7437),a=t(2265),n=t(5452),l=t.n(n),i=t(6375),c=t(9820),o=t(2381),d=t(9174),m=t(5526),x=t(7689),h=t(1649),u=t(5302),g=t(1723),f=t(2489),p=t(9397),b=t(91),j=t(2252),v=t(6221);let N=[{id:1,name:"Kundendaten_Januar.csv",date:"2024-01-20",status:"success",records:1234,type:"CSV"},{id:2,name:"Newsletter_Abonnenten.xlsx",date:"2024-01-18",status:"processing",records:892,type:"Excel"},{id:3,name:"API_Sync_Shopify",date:"2024-01-15",status:"success",records:456,type:"API"}];function y(){let[e,s]=(0,a.useState)(!1),[t,n]=(0,a.useState)([]),[y,w]=(0,a.useState)({}),[D,S]=(0,a.useState)(!1),Z=(0,a.useRef)(null),k=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?s(!0):"dragleave"===e.type&&s(!1)},C=e=>{let s=["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],t=e.filter(e=>s.includes(e.type)||e.name.toLowerCase().endsWith(".csv")||e.name.toLowerCase().endsWith(".xlsx")||e.name.toLowerCase().endsWith(".xls"));t.length!==e.length&&alert("Nur CSV und Excel-Dateien sind erlaubt."),n(e=>[...e,...t])},z=async()=>{if(0===t.length){alert("Bitte w\xe4hlen Sie zuerst Dateien aus.");return}S(!0);let e=0,s=0;for(let r of t)try{await I(r),e++}catch(e){s++,console.error("Failed to process ".concat(r.name,":"),e)}S(!1),e>0&&0===s?alert("\uD83C\uDF89 Alle ".concat(e," Datei(en) erfolgreich verarbeitet! Die Daten sind jetzt in Ihrer Datenbank verf\xfcgbar.")):e>0&&s>0?alert("⚠️ ".concat(e," Datei(en) erfolgreich verarbeitet, ").concat(s," Datei(en) fehlgeschlagen.")):alert("❌ Alle ".concat(s," Datei(en) konnten nicht verarbeitet werden.")),e>0&&(n([]),w({}))},I=async e=>new Promise((s,t)=>{let r=new FileReader;r.onload=async r=>{try{var a;let n=null===(a=r.target)||void 0===a?void 0:a.result;w(s=>({...s,[e.name]:10})),l().parse(n,{header:!0,skipEmptyLines:!0,complete:async r=>{try{let a=r.data;w(s=>({...s,[e.name]:30}));let n=a.map(e=>{let s=e.email||e.Email||e.EMAIL||e["E-Mail"]||e.mail,t=e.first_name||e.First_Name||e.firstname||e.Vorname||e["First Name"],r=e.last_name||e.Last_Name||e.lastname||e.Nachname||e["Last Name"],a=e.company||e.Company||e.Unternehmen||e.Firma,n=e.phone||e.Phone||e.Telefon||e.Tel||e["Phone Number"];return s?{customer_type:(null==a?void 0:a.trim())?"company":"person",email:s.trim(),first_name:(null==t?void 0:t.trim())||void 0,last_name:(null==r?void 0:r.trim())||void 0,company_name:(null==a?void 0:a.trim())||void 0,phone:(null==n?void 0:n.trim())||void 0}:null}).filter(e=>null!==e);if(console.log("Parsed ".concat(n.length," customers from ").concat(e.name)),w(s=>({...s,[e.name]:60})),n.length>0){let{data:s,error:r}=await (0,m.LQ)(n);if(r){console.error("Database error:",r);let s="string"==typeof r?r:r.message||"Unbekannter Fehler";alert("Fehler beim Speichern der Daten aus ".concat(e.name,": ").concat(s)),w(s=>({...s,[e.name]:0})),t(r);return}console.log("Successfully inserted ".concat((null==s?void 0:s.length)||n.length," customers")),w(s=>({...s,[e.name]:100})),setTimeout(()=>{alert("✅ ".concat(e.name,": ").concat(n.length," Kundendaten erfolgreich importiert!"))},500)}else alert("⚠️ ".concat(e.name,": Keine g\xfcltigen Kundendaten gefunden. Stellen Sie sicher, dass die Datei eine 'email' Spalte enth\xe4lt.")),w(s=>({...s,[e.name]:0}));s()}catch(s){console.error("Processing error:",s),alert("Fehler beim Verarbeiten von ".concat(e.name,": ").concat(s)),w(s=>({...s,[e.name]:0})),t(s)}},error:s=>{console.error("CSV parsing error:",s),alert("Fehler beim Lesen der CSV-Datei ".concat(e.name,": ").concat(s.message)),w(s=>({...s,[e.name]:0})),t(s)}})}catch(s){console.error("File reading error:",s),alert("Fehler beim Lesen der Datei ".concat(e.name)),w(s=>({...s,[e.name]:0})),t(s)}},r.onerror=()=>{alert("Fehler beim Lesen der Datei ".concat(e.name)),w(s=>({...s,[e.name]:0})),t(Error("File reading failed"))},r.readAsText(e)}),L=e=>{n(s=>s.filter(s=>s.name!==e)),w(s=>{let t={...s};return delete t[e],t})},_=()=>{var e;null===(e=Z.current)||void 0===e||e.click()};return(0,r.jsx)(i.Z,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Daten hinzuf\xfcgen"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Importieren Sie neue Daten in Ihr CRM-System"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,r.jsxs)(c.Zb,{className:"hover:shadow-lg transition-shadow",children:[(0,r.jsxs)(c.Ol,{className:"text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(x.Z,{className:"h-6 w-6 text-blue-600"})}),(0,r.jsx)(c.ll,{className:"text-lg",children:"CSV/Excel Import"}),(0,r.jsx)(c.SZ,{children:"Laden Sie CSV oder Excel-Dateien hoch"})]}),(0,r.jsxs)(c.aY,{className:"space-y-4",children:[(0,r.jsx)("input",{ref:Z,type:"file",multiple:!0,accept:".csv,.xlsx,.xls",onChange:e=>{let s=e.target.files;s&&C(Array.from(s))},className:"hidden"}),(0,r.jsxs)("div",{onDragEnter:k,onDragLeave:k,onDragOver:k,onDrop:e=>{e.preventDefault(),e.stopPropagation(),s(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&C(Array.from(e.dataTransfer.files))},className:"border-2 border-dashed rounded-lg p-6 text-center transition-colors cursor-pointer ".concat(e?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-blue-400"),onClick:_,children:[(0,r.jsx)(x.Z,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:t.length>0?"Weitere Dateien hinzuf\xfcgen":"Dateien hier ablegen oder klicken zum Ausw\xe4hlen"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"CSV, XLS, XLSX (max. 10MB)"})]}),t.length>0&&(0,r.jsx)("div",{className:"space-y-2 max-h-32 overflow-y-auto",children:t.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded border",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[(0,r.jsx)(h.Z,{className:"h-4 w-4 text-blue-600 flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("span",{className:"text-sm truncate block",title:e.name,children:e.name}),(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:[(e.size/1024).toFixed(1)," KB • Bereit zur Verarbeitung"]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[void 0!==y[e.name]&&y[e.name]<100&&(0,r.jsxs)("div",{className:"text-xs text-blue-600 font-medium",children:[Math.round(y[e.name]),"%"]}),100===y[e.name]&&(0,r.jsx)(u.Z,{className:"h-4 w-4 text-green-600"}),!y[e.name]&&(0,r.jsx)(g.Z,{className:"h-4 w-4 text-gray-400"}),(0,r.jsx)("button",{onClick:s=>{s.stopPropagation(),L(e.name)},className:"text-gray-400 hover:text-red-500 transition-colors",disabled:D,children:(0,r.jsx)(f.Z,{className:"h-4 w-4"})})]})]},s))}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(o.z,{onClick:t.length>0?z:_,className:"w-full",disabled:D,variant:t.length>0?"default":"outline",children:[(0,r.jsx)(x.Z,{className:"mr-2 h-4 w-4"}),D?"Wird verarbeitet...":t.length>0?"".concat(t.length," Datei(en) verarbeiten"):"Dateien ausw\xe4hlen"]}),t.length>0&&!D&&(0,r.jsxs)(o.z,{onClick:_,variant:"outline",className:"w-full",children:[(0,r.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"Weitere Dateien hinzuf\xfcgen"]})]})]})]}),(0,r.jsxs)(c.Zb,{className:"hover:shadow-lg transition-shadow cursor-pointer border-2 border-dashed border-gray-300 hover:border-green-500",children:[(0,r.jsxs)(c.Ol,{className:"text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(b.Z,{className:"h-6 w-6 text-green-600"})}),(0,r.jsx)(c.ll,{className:"text-lg",children:"API Integration"}),(0,r.jsx)(c.SZ,{children:"Verbinden Sie externe Systeme \xfcber API"})]}),(0,r.jsx)(c.aY,{className:"text-center",children:(0,r.jsxs)(o.z,{variant:"outline",className:"w-full",children:[(0,r.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"API einrichten"]})})]}),(0,r.jsxs)(c.Zb,{className:"hover:shadow-lg transition-shadow cursor-pointer border-2 border-dashed border-gray-300 hover:border-purple-500",children:[(0,r.jsxs)(c.Ol,{className:"text-center",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(p.Z,{className:"h-6 w-6 text-purple-600"})}),(0,r.jsx)(c.ll,{className:"text-lg",children:"Manueller Import"}),(0,r.jsx)(c.SZ,{children:"Daten manuell eingeben oder kopieren"})]}),(0,r.jsx)(c.aY,{className:"text-center",children:(0,r.jsxs)(o.z,{variant:"outline",className:"w-full",children:[(0,r.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"Manuell hinzuf\xfcgen"]})})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,r.jsxs)(c.Zb,{children:[(0,r.jsxs)(c.Ol,{children:[(0,r.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(g.Z,{className:"h-5 w-5"}),"Letzte Importe"]}),(0,r.jsx)(c.SZ,{children:"\xdcbersicht \xfcber Ihre neuesten Datenimporte"})]}),(0,r.jsx)(c.aY,{className:"space-y-4",children:N.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"p-2 rounded-full ".concat("success"===e.status?"bg-green-100 text-green-600":"processing"===e.status?"bg-yellow-100 text-yellow-600":"bg-red-100 text-red-600"),children:["success"===e.status&&(0,r.jsx)(u.Z,{className:"h-4 w-4"}),"processing"===e.status&&(0,r.jsx)(g.Z,{className:"h-4 w-4"}),"error"===e.status&&(0,r.jsx)(j.Z,{className:"h-4 w-4"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-medium text-sm",children:e.name}),(0,r.jsxs)("p",{className:"text-xs text-gray-600",children:[e.records.toLocaleString()," Datens\xe4tze • ",e.date]})]})]}),(0,r.jsx)(d.C,{variant:"success"===e.status?"default":"processing"===e.status?"secondary":"destructive",children:e.type})]},e.id))})]}),(0,r.jsxs)(c.Zb,{children:[(0,r.jsxs)(c.Ol,{children:[(0,r.jsxs)(c.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(v.Z,{className:"h-5 w-5"}),"Import-Statistiken"]}),(0,r.jsx)(c.SZ,{children:"\xdcberblick \xfcber Ihre Import-Performance"})]}),(0,r.jsxs)(c.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-blue-900",children:45}),(0,r.jsx)("div",{className:"text-sm text-blue-600",children:"Gesamt Importe"})]}),(0,r.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,r.jsx)("div",{className:"text-2xl font-bold text-green-900",children:41}),(0,r.jsx)("div",{className:"text-sm text-green-600",children:"Erfolgreich"})]})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-sm font-medium",children:"Erfolgsrate"}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["91.1","%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"".concat(91.11111111111111,"%")}})})]}),(0,r.jsxs)("div",{className:"pt-4 border-t",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-medium",children:"Datens\xe4tze importiert"}),(0,r.jsx)("span",{className:"text-lg font-bold",children:28750..toLocaleString()})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Letzter Import: vor ","2 Stunden"]})]})]})]})]})]})})}},2381:function(e,s,t){"use strict";t.d(s,{z:function(){return o}});var r=t(7437),a=t(2265),n=t(7053),l=t(535),i=t(3448);let c=(0,l.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,s)=>{let{className:t,variant:a,size:l,asChild:o=!1,...d}=e,m=o?n.g7:"button";return(0,r.jsx)(m,{className:(0,i.cn)(c({variant:a,size:l,className:t})),ref:s,...d})});o.displayName="Button"}},function(e){e.O(0,[9735,7583,5779,7182,6375,2971,2117,1744],function(){return e(e.s=2056)}),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2819],{190:function(e,s,r){Promise.resolve().then(r.bind(r,1076))},1076:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return b}});var l=r(7437),a=r(2265),n=r(4415),t=r(9820),i=r(2381),c=r(9174),d=r(6246),u=r(5526),o=r(8617),m=r(6595),x=r(8906),h=r(4001),g=r(9397),f=r(5805),j=r(8728);function b(){let[e,s]=(0,a.useState)(null),[r,b]=(0,a.useState)(null),[p,N]=(0,a.useState)([]),[v,y]=(0,a.useState)([]),[w,Z]=(0,a.useState)([]),[z,B]=(0,a.useState)(!0),[k,E]=(0,a.useState)(!1);(0,a.useEffect)(()=>{C()},[]);let C=async()=>{try{let e=await (0,u.ts)();if(!e)return;s(e);let{data:r}=await (0,u.Rg)(e.id);b(r);let{data:l}=await (0,u.Yx)("demo-org-id");N(l||[]);let{data:a}=await (0,u.xJ)();y(a||[]);let{data:n}=await (0,u.IN)();Z(n||[])}catch(e){console.error("Error loading data:",e)}finally{B(!1)}},S=e=>({red:"bg-red-100 text-red-800 border-red-200",blue:"bg-blue-100 text-blue-800 border-blue-200",green:"bg-green-100 text-green-800 border-green-200",purple:"bg-purple-100 text-purple-800 border-purple-200",yellow:"bg-yellow-100 text-yellow-800 border-yellow-200"})[e.color]||"bg-gray-100 text-gray-800 border-gray-200",O=e=>e>=90?(0,l.jsx)(o.Z,{className:"h-4 w-4"}):e>=70?(0,l.jsx)(m.Z,{className:"h-4 w-4"}):e>=50?(0,l.jsx)(x.Z,{className:"h-4 w-4"}):(0,l.jsx)(h.Z,{className:"h-4 w-4"}),R=(e,s)=>s?s.split(" ").map(e=>e.charAt(0)).slice(0,2).join("").toUpperCase():e.substring(0,2).toUpperCase(),_=s=>(null==e?void 0:e.email)==="testdatacrmpascal@gmail.com"||((null==r?void 0:r.level)||0)>=s.level;return z?(0,l.jsx)(n.Z,{children:(0,l.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,l.jsx)("p",{className:"mt-2 text-gray-600",children:"Lade Benutzerrechte..."})]})})}):(0,l.jsx)(n.Z,{children:(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Benutzerrechte verwalten"}),(0,l.jsx)("p",{className:"text-gray-600 mt-1",children:"Rollen und Berechtigungen f\xfcr Organisationsmitglieder verwalten"})]}),(0,l.jsxs)(i.z,{onClick:()=>E(!0),className:"bg-blue-600 hover:bg-blue-700",children:[(0,l.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Benutzer hinzuf\xfcgen"]})]}),(0,l.jsxs)(t.Zb,{className:"border-blue-200 bg-blue-50",children:[(0,l.jsx)(t.Ol,{children:(0,l.jsxs)(t.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)(x.Z,{className:"h-5 w-5 text-blue-600"}),"Ihre aktuellen Berechtigungen"]})}),(0,l.jsx)(t.aY,{children:(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)(d.qE,{children:(0,l.jsx)(d.Q5,{children:R((null==e?void 0:e.email)||"",null==e?void 0:e.full_name)})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium",children:null==e?void 0:e.email}),r&&(0,l.jsxs)(c.C,{className:S(r),children:[O(r.level),(0,l.jsx)("span",{className:"ml-1",children:r.name})]})]})]})})]}),(0,l.jsxs)(t.Zb,{children:[(0,l.jsxs)(t.Ol,{children:[(0,l.jsxs)(t.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)(f.Z,{className:"h-5 w-5"}),"Organisationsmitglieder (",p.length,")"]}),(0,l.jsx)(t.SZ,{children:"Verwalten Sie Rollen und Berechtigungen f\xfcr alle Mitglieder"})]}),(0,l.jsx)(t.aY,{children:0===p.length?(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)(f.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Keine Benutzer"}),(0,l.jsx)("p",{className:"text-gray-500 mb-4",children:"Noch keine Benutzer in dieser Organisation."}),(0,l.jsxs)(i.z,{onClick:()=>E(!0),children:[(0,l.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Ersten Benutzer hinzuf\xfcgen"]})]}):(0,l.jsx)("div",{className:"space-y-4",children:p.map(e=>(0,l.jsx)("div",{className:"border rounded-lg p-4",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(d.qE,{children:(0,l.jsx)(d.Q5,{children:R(e.user.email||"",e.user.full_name)})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"font-medium",children:e.user.full_name||e.user.email}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.user.email}),(0,l.jsxs)(c.C,{className:S(e.role),children:[O(e.role.level),(0,l.jsx)("span",{className:"ml-1",children:e.role.name})]})]})]}),_(e.role)&&(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsxs)(i.z,{variant:"outline",size:"sm",children:[(0,l.jsx)(j.Z,{className:"h-4 w-4 mr-2"}),"Berechtigungen"]}),(0,l.jsxs)(i.z,{variant:"outline",size:"sm",children:[(0,l.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Rolle \xe4ndern"]})]})]})},e.id))})})]}),(0,l.jsxs)(t.Zb,{children:[(0,l.jsxs)(t.Ol,{children:[(0,l.jsxs)(t.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)(m.Z,{className:"h-5 w-5"}),"Verf\xfcgbare Rollen"]}),(0,l.jsx)(t.SZ,{children:"\xdcbersicht \xfcber alle verf\xfcgbaren Rollen und deren Berechtigungsstufen"})]}),(0,l.jsx)(t.aY,{children:(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(e=>(0,l.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[O(e.level),(0,l.jsx)("h4",{className:"font-medium",children:e.name}),(0,l.jsxs)(c.C,{variant:"secondary",children:["Level ",e.level]})]}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]},e.id))})})]}),(0,l.jsxs)(t.Zb,{children:[(0,l.jsxs)(t.Ol,{children:[(0,l.jsxs)(t.ll,{className:"flex items-center gap-2",children:[(0,l.jsx)(h.Z,{className:"h-5 w-5"}),"Verf\xfcgbare Berechtigungen"]}),(0,l.jsx)(t.SZ,{children:"Alle verf\xfcgbaren Einzelberechtigungen nach Kategorien"})]}),(0,l.jsx)(t.aY,{children:(0,l.jsx)("div",{className:"space-y-4",children:Object.entries(w.reduce((e,s)=>(e[s.category]||(e[s.category]=[]),e[s.category].push(s),e),{})).map(e=>{let[s,r]=e;return(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-medium text-gray-900 mb-2 capitalize",children:s}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:r.map(e=>(0,l.jsxs)("div",{className:"border rounded p-2",children:[(0,l.jsx)("p",{className:"text-sm font-medium",children:e.name}),(0,l.jsx)("p",{className:"text-xs text-gray-600",children:e.description})]},e.id))})]},s)})})})]})]})})}},6246:function(e,s,r){"use strict";r.d(s,{Q5:function(){return c},qE:function(){return i}});var l=r(7437),a=r(2265),n=r(1146),t=r(3448);let i=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,l.jsx)(n.fC,{ref:s,className:(0,t.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",r),...a})});i.displayName=n.fC.displayName,a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,l.jsx)(n.Ee,{ref:s,className:(0,t.cn)("aspect-square h-full w-full",r),...a})}).displayName=n.Ee.displayName;let c=a.forwardRef((e,s)=>{let{className:r,...a}=e;return(0,l.jsx)(n.NY,{ref:s,className:(0,t.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",r),...a})});c.displayName=n.NY.displayName},2381:function(e,s,r){"use strict";r.d(s,{z:function(){return d}});var l=r(7437),a=r(2265),n=r(7053),t=r(535),i=r(3448);let c=(0,t.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,s)=>{let{className:r,variant:a,size:t,asChild:d=!1,...u}=e,o=d?n.g7:"button";return(0,l.jsx)(o,{className:(0,i.cn)(c({variant:a,size:t,className:r})),ref:s,...u})});d.displayName="Button"}},function(e){e.O(0,[1216,7182,4415,1744],function(){return e(e.s=190)}),_N_E=e.O()}]);